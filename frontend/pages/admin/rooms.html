<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="/pages/admin/css/adminStyle.css">
  <link rel="stylesheet" href="/pages/admin/css/roomStyle.css">
  <script src="/pages/admin/js/adminLayout.js" defer></script>
  <script type="module" src="/pages/admin/js/rooms.js" defer></script>

</head>


<body>

  <div id="header-container"></div>
  <!-- ===== MAIN CONTENT ===== -->
  <main class="main-container">
      <div class="search-wrapper">
          <div class="search-bar">
              <span class="icon-left"><i class="fa-solid fa-magnifying-glass"></i></span>
              <input id="searchInput" type="text" placeholder="Tìm kiếm theo mã phòng, loại phòng">
          </div>
      </div>
       <!-- Sort buttons va them phong -->
      <div class="top-bar">
          <div class="sort-bar">
              <button data-sort="price">Giá ↑↓</button>
              <select id="typeFilter" class="type-select">
                  <option value="">-- Tất cả loại phòng --</option>
              </select>
              <select id="statusFilter" class="status-select">
                  <option value="">-- Tất cả tình trạng --</option>
              </select>
          </div>

          <button id="addRoomBtn" class="add-room-btn">+ Thêm phòng</button>
      </div>


      <!-- Room list render output -->
      <div id="roomList" class="room-list">
          <!-- JS sẽ render danh sách phòng ở đây -->
      </div>
  </main>
  <!-- FILTER POPUP -->
  <div id="filterPopup" class="filter-popup">
      <div class="filter-content">
          <h3>Bộ lọc phòng</h3>

          <label>Giá tối đa:</label>
          <input id="filterPrice" type="number" placeholder="VD: 500000">

          <label>Loại phòng:</label>
          <select id="filterType">
              <option value="">-- Tất cả --</option>
          </select>

          <label>Trạng thái:</label>
          <select id="filterStatus">
              <option value="">-- Tất cả --</option>
          </select>

          <div class="filter-footer">
              <button id="applyFilter">Áp dụng</button>
              <button id="closeFilter">Đóng</button>
          </div>
      </div>
  </div>
  <!-- POPUP THÊM PHÒNG -->
  <div id="addRoomPopup" class="add-popup">
    <div class="add-popup-content">
        <h3>Thêm phòng mới</h3>

        <div class="form-horizontal">

            <div class="left-section">
                <label>Số phòng:</label>
                <input id="newRoomId" type="text">

                <label>Loại phòng:</label>
                <select id="newRoomType"></select>

                <label>Giá:</label>
                <input id="newRoomPrice" type="number">

                <label>Trạng thái:</label>
                <select id="newRoomStatus"></select>

                <label>Mô tả:</label>
                <textarea id="newRoomDesc"></textarea>
            </div>

            <div class="right-section">
                <label>Ảnh phòng:</label>
                <div class="image-upload-area" id="imageUploadArea">
                    <p>Kéo & thả ảnh vào đây hoặc click để chọn</p>
                    <img id="previewImage" src="" alt="" style="display:none;">
                    <input id="newRoomImg" type="file" accept="image/*" hidden>
                </div>
            </div>

        </div>

        <div class="footer-btns">
            <button id="saveNewRoom">Lưu</button>
            <button id="closeAddRoom">Đóng</button>
        </div>
    </div>
</div>

<!-- POPUP CHI TIẾT / CHỈNH SỬA PHÒNG -->
  <div id="editRoomPopup" class="add-popup">
    <div class="add-popup-content">
      <h3>Chi tiết phòng</h3>

      <div class="form-horizontal">

        <div class="left-section">
            <label>Mã phòng:</label>
            <input id="editRoomId" type="text" disabled>

            <label>Loại phòng:</label>
            <select id="editRoomType"></select>

            <label>Giá:</label>
            <input id="editRoomPrice" type="number">

            <label>Trạng thái:</label>
            <select id="editRoomStatus"></select>

            <div id="maintenanceCodeRow" style="display: none;">
                <label>Mã bảo trì:</label>
                <input id="editMaintenanceCode" type="text" disabled>
            </div>

            <label>Mô tả:</label>
            <textarea id="editRoomDesc"></textarea>
        </div>

        <div class="right-section">
            <label>Ảnh phòng:</label>
            <div class="image-upload-area" id="editImageUploadArea">
                <p>Kéo & thả ảnh vào đây hoặc click để chọn</p>
                <img id="editPreviewImage" src="" alt="" style="display:block; width:100%; max-height:300px;">
                <input id="editRoomImg" type="file" accept="image/*" hidden>
            </div>
        </div>

      </div>

      <div class="footer-btns">
          <button id="saveEditRoom">Lưu thay đổi</button>
          <button id="deleteRoomBtn" style="background:#ff4d4f; color:white;">Xóa phòng</button>
          <button id="closeEditRoom">Đóng</button>
      </div>
    </div>
  </div>

  <!-- POPUP BẢO TRÌ PHÒNG -->
  <div id="maintenancePopup" class="add-popup">
    <div class="add-popup-content">
      <h3>Tạo lịch bảo trì phòng</h3>

      <div class="form-horizontal">
        <div class="left-section" style="width: 100%;">
          <label>Mã phòng:</label>
          <input id="maintenanceRoomCode" type="text" disabled>

          <label>Ngày bắt đầu:</label>
          <input id="maintenanceStartDate" type="datetime-local" required>

          <label>Ngày kết thúc:</label>
          <input id="maintenanceEndDate" type="datetime-local" required>

          <label>Lý do bảo trì:</label>
          <textarea id="maintenanceReason" rows="4" placeholder="Nhập lý do bảo trì..."></textarea>
        </div>
      </div>

      <div class="footer-btns">
          <button id="saveMaintenanceBtn">Lưu</button>
          <button id="closeMaintenanceBtn">Đóng</button>
      </div>
    </div>
  </div>

  <div id="footer-container">
  </div>
    <script src="/pages/admin/js/guard.js"></script>
</body>
</html>
